# AI 功能使用教程

> MarkdownMonkey AI 功能完整指南

---

## 📖 目录

1. [AI 功能概述](#ai-功能概述)
2. [快速配置指南](#快速配置指南)
3. [详细配置步骤](#详细配置步骤)
4. [使用 AI 功能](#使用-ai-功能)
5. [高级技巧](#高级技巧)
6. [故障排除](#故障排除)

---

## AI 功能概述

MarkdownMonkey 集成了强大的 AI 功能，可以帮助您：

✅ **写作助手** - AI 续写、改写文本  
✅ **翻译工具** - 中英文互译  
✅ **内容总结** - 快速提取关键信息  
✅ **智能对话** - 与 AI 交流获取建议  
✅ **自定义提示** - 创建个性化 AI 操作

---

## 快速配置指南

### 方案 1: 使用 OpenAI 官方服务

**步骤**:

1. 打开设置 → AI 设置
2. 提供商选择: `OpenAI (兼容 API)`
3. API Base URL: `https://api.openai.com/v1`（默认）
4. API Key: 输入您的 OpenAI API Key
5. 模型: `gpt-4o-mini` 或 `gpt-4`
6. 点击 `测试` 按钮验证
7. 保存

**获取 API Key**:

- 访问 [OpenAI Platform](https://platform.openai.com/)
- 注册/登录账号
- 进入 API Keys 页面
- 创建新的 API Key

---

### 方案 2: 使用 DeepSeek（国内可用）

**步骤**:

1. 打开设置 → AI 设置
2. 提供商选择: `OpenAI (兼容 API)`
3. 点击 `📋 常用配置示例（点击展开）`
4. 复制 DeepSeek 配置:
   - API Base URL: `https://api.deepseek.com`
   - 模型: `deepseek-chat`
5. 输入您的 DeepSeek API Key
6. 点击 `测试` 验证
7. 保存

**获取 API Key**:

- 访问 [DeepSeek 官网](https://www.deepseek.com/)
- 注册账号
- 进入控制台获取 API Key

**优势**:

- ✅ 国内访问快
- ✅ 价格便宜
- ✅ 支持中文优化

---

### 方案 3: 使用 Kimi

**步骤**:

1. 打开设置 → AI 设置
2. 提供商选择: `OpenAI (兼容 API)`
3. 配置:
   - API Base URL: `https://api.moonshot.cn/v1`
   - API Key: 您的 Kimi API Key
   - 模型: `moonshot-v1-8k`
4. 测试并保存

**获取 API Key**:

- 访问 [Kimi 开放平台](https://platform.moonshot.cn/)
- 注册并获取 API Key

**优势**:

- ✅ 长上下文支持
- ✅ 国内服务器
- ✅ 中文表现优秀

---

### 方案 4: 使用 Ollama（免费本地）

**步骤**:

1. 安装 Ollama

   ```bash
   # 访问 https://ollama.com/ 下载安装
   ```

2. 下载模型

   ```bash
   ollama pull llama3
   # 或其他模型
   ollama pull qwen
   ```

3. 启动 Ollama 服务

   ```bash
   ollama serve
   ```

4. MarkdownMonkey 配置:
   - 提供商选择: `Ollama (本地)`
   - API Base URL: `http://127.0.0.1:11434`
   - 模型: `llama3`（或您下载的模型名）
   - **无需 API Key**

5. 保存

**优势**:

- ✅ 完全免费
- ✅ 无需网络
- ✅ 数据隐私
- ❌ 需要本地运行

---

## 详细配置步骤

### OpenAI 兼容服务完整配置

#### 1. 打开设置界面

点击主界面顶部的 `设置` 按钮

#### 2. 进入 AI 设置

点击 `AI 设置` 标签

#### 3. 选择提供商

从下拉菜单选择 `OpenAI (兼容 API)`

#### 4. 查看配置示例

点击 `📋 常用配置示例（点击展开）`

您会看到 5 个提供商的详细配置：

**DeepSeek**:

```
API Base URL: https://api.deepseek.com
模型: deepseek-chat
```

**Kimi (Moonshot AI)**:

```
API Base URL: https://api.moonshot.cn/v1
模型: moonshot-v1-8k
```

**通义千问 (Qwen)**:

```
API Base URL: https://dashscope.aliyuncs.com/compatible-mode/v1
模型: qwen-max
```

**智谱 AI (ChatGLM)**:

```
API Base URL: https://open.bigmodel.cn/api/paas/v4
模型: glm-4
```

**OpenRouter**:

```
API Base URL: https://openrouter.ai/api/v1
模型: anthropic/claude-3.5-sonnet
```

#### 5. 填写配置

根据选择的提供商填写：

- API Base URL（复制上面的地址）
- API Key（从提供商网站获取）
- 模型（复制上面的模型名）

#### 6. 配置高级选项

**系统提示词**（可选）:

```
你是一个专业的 Markdown 写作助手，擅长帮助用户撰写技术文档、博客文章和笔记。
```

**温度**（可选）:

- 0.0-1.0 之间
- 0.7 推荐（平衡创造力和准确性）
- 更低（更精确）
- 更高（更创造性）

#### 7. 测试连接

点击 API Key 输入框旁的 `测试` 按钮

成功会显示：✅ 连接成功  
失败会显示：❌ 错误信息

#### 8. 保存配置

点击底部 `保存` 按钮

---

## 使用 AI 功能

### 方式 1: AI 对话窗口

#### 打开对话

点击菜单栏 `AI 对话` 按钮

#### 使用界面

```
┌────────────────────────────────────────┐
│  AI 对话                      [最小化] │
├────────────────────────────────────────┤
│  你: 请帮我写一篇关于...的文章         │
│                                        │
│  AI: 好的，我来帮你...                │
│     [续写内容]                         │
│     ...                                │
│                                        │
│     [插入到编辑器] [复制]              │
│                                        │
├────────────────────────────────────────┤
│  输入消息... (Shift+Enter换行)         │
│                          [发送] [清空]  │
└────────────────────────────────────────┘
```

#### 操作

1. 在底部输入框输入您的问题
2. 按 `Enter` 发送（`Shift+Enter` 换行）
3. AI 回复后，可以：
   - 点击 `插入到编辑器` 将内容添加到文档
   - 点击 `复制` 复制内容
   - 继续对话

---

### 方式 2: 右键菜单 AI 操作

#### 选中文本操作

1. 在编辑器中选中一段文本
2. 右键点击选中区域
3. 选择 AI 操作：

**续写（选中）**:

- AI 基于选中内容继续写作
- 适合扩展段落、增加细节

**改写（选中）**:

- AI 重新表述选中内容
- 适合改进措辞、调整风格

**翻译为中文**:

- 将英文翻译成中文
- 保持原意和格式

**翻译为英文**:

- 将中文翻译成英文
- 专业术语准确

**总结要点（选中）**:

- 提取选中文本的关键信息
- 生成简洁摘要

#### 全文操作

不选中文本，直接右键：

**续写（全文）**:

- 基于整个文档继续写作

**总结要点（全文）**:

- 总结整篇文档

---

### 方式 3: 自定义提示模板

#### 创建模板

1. 打开设置 → `提示模板` 标签
2. 点击 `+ 新建模板`
3. 填写信息：

**示例 - 博客改写**:

```
标题: 改写为博客风格
作用域: 选中
提示词:
请将以下内容改写为轻松友好的博客风格，保持技术准确性：

{text}
```

**示例 - 技术文档**:

```
标题: 转为技术文档
作用域: 选中
提示词:
请将以下内容转换为专业的技术文档格式，包含：
1. 简介
2. 步骤说明
3. 注意事项

原文：
{text}
```

4. 点击 `启用` 复选框
5. 保存

#### 使用模板

1. 选中文本
2. 右键 → 选择您的自定义模板
3. AI 会根据模板处理文本

---

## 高级技巧

### 1. 优化系统提示词

**通用写作助手**:

```
你是一个专业的写作助手。请用清晰、简洁的语言回答，
避免冗长和废话。如果不确定，请诚实说明。
```

**技术文档专家**:

```
你是一个技术文档专家，擅长将复杂概念解释得简单易懂。
使用代码示例和具体案例说明，格式规范。
```

**创意写作**:

```
你是一个富有创造力的写作助手，擅长故事构思、
情节设计和人物塑造。语言生动，富有感染力。
```

### 2. 调整温度参数

**精确任务（翻译、总结）**: 0.3-0.5  
**平衡任务（改写、续写）**: 0.7  
**创意任务（故事、创意）**: 0.8-1.0

### 3. 分步骤使用 AI

**撰写文章流程**:

1. AI 对话：生成大纲
2. 续写（选中）：扩展每个部分
3. 改写（选中）：优化措辞
4. 总结（全文）：生成摘要

### 4. 组合使用模板

**工作流示例**:

1. 模板 A：生成初稿
2. 模板 B：技术审核
3. 模板 C：润色语言
4. 模板 D：SEO 优化

---

## 故障排除

### 问题 1: 测试连接失败

**可能原因**:

- ❌ API Key 错误
- ❌ API Base URL 错误
- ❌ 网络连接问题
- ❌ 服务商服务不可用

**解决方法**:

1. 检查 API Key 是否正确（无多余空格）
2. 确认 API Base URL 格式正确
3. 尝试访问服务商官网确认服务状态
4. 检查网络连接

### 问题 2: AI 响应很慢

**可能原因**:

- 网络延迟
- 服务器负载高
- 模型较大

**解决方法**:

1. 切换到更快的提供商（如 DeepSeek）
2. 使用本地 Ollama
3. 减少输入文本长度

### 问题 3: AI 回答质量不佳

**改进方法**:

1. 优化系统提示词，更具体地描述需求
2. 调整温度参数
3. 分步骤操作，而不是一次性完成
4. 尝试不同的模型

### 问题 4: Ollama 无法连接

**检查清单**:

1. Ollama 是否已安装？

   ```bash
   ollama --version
   ```

2. Ollama 服务是否运行？

   ```bash
   ollama serve
   ```

3. 端口是否正确？（默认 11434）

4. 模型是否已下载？
   ```bash
   ollama list
   ```

---

## 最佳实践

### 📝 写作建议

1. **先大纲后细节**: 让 AI 先生成大纲，再逐步扩展
2. **迭代改进**: 多次改写直到满意
3. **人工审核**: AI 是助手，最终由您把关
4. **保留原创**: 将 AI 建议作为灵感，保持自己的风格

### 🔐 安全建议

1. **保护 API Key**: 不要分享给他人
2. **定期更换**: 定期更换 API Key
3. **监控使用**: 关注 API 用量和费用
4. **敏感信息**: 不要让 AI 处理敏感数据

### 💰 成本优化

1. **选择合适模型**: 简单任务用小模型
2. **控制上下文长度**: 减少输入文本
3. **使用本地模型**: Ollama 完全免费
4. **批量处理**: 一次处理多个任务

---

## 推荐配置

### 个人用户

**推荐**:Ollama (本地) 或 DeepSeek

**原因**:

- 本地：免费、隐私
- DeepSeek：便宜、快速

### 专业用户

**推荐**: OpenAI GPT-4 或 Claude

**原因**:

- 最高质量
- 最佳理解能力
- 适合复杂任务

### 企业用户

**推荐**: Azure OpenAI 或私有部署

**原因**:

- 数据安全
- SLA 保障
- 合规性

---

**现在开始使用 AI 提升您的写作效率吧！** 🚀

> 提示：点击"测试"按钮确保配置正确，避免浪费时间！
